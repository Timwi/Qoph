<style>
	.section {
		display: none;
	}
		.section.shown {
			display: block;
		}

	menu.stats {
		font-size: 18pt;
		font-weight: bold;
		font-family: 'Montserrat';
		line-height: 2;

		margin: 2cm 0 1cm;
		list-style-type: none;
		display: flex;
		justify-content: center;
		flex-wrap: wrap;
	}
		menu.stats li {
			margin: .1cm .3cm;
		}
			menu.stats li a {
				color: black;
				padding: .2cm .5cm;
				border-radius: 100vw;
			}
			menu.stats li a.selected {
				background: hsl(220, 80%, 95%);
				box-shadow: 0 0 .2cm rgba(0, 0, 0, .5);
			}

	div.legend {
		display: flex;
		flex-wrap: wrap;
		justify-content: center;
		margin: .5cm auto .1cm;
	}
		div.legend .item {
			white-space: nowrap;
			width: min-content;
			margin: .1cm .5cm;
		}
		div.legend .item .color {
			display: inline-block;
			width: 1cm;
			height: .1cm;
			vertical-align: middle;
			margin-right: .25cm;
			margin-bottom: .1cm;
		}

	table.wrong-answers, table.ratings {
		margin: .1cm auto;
	}
		table.wrong-answers ul {
			margin: 0;
			padding: 0;
			list-style-type: none;
		}
			table.wrong-answers ul .w {
				font-family: 'Montserrat';
			}
		table.wrong-answers th, table.wrong-answers td {
			vertical-align: top;
		}

	#puzzle-stats table ul {
		margin: 0;
		padding-left: 1em;
		font-size: 10pt;
	}
</style>
<svg id='defs' width='0' height='0'>
	<defs>
		<marker id='arrow' orient='auto' overflow='visible'><path d='M -4,0 l -3,3 9,-3 -9,-3z'/></marker>
		<filter id='drop-shadow' x='-1000%' y='-1000%' width='2100%' height='2100%'>
			<feGaussianBlur in='SourceAlpha' stdDeviation='.1' />
			<feOffset dx='.125' dy='.125' result='b' />
			<feFlood flood-color='rgba(0,0,0,.5)' />
			<feComposite in2='b' operator='in' />
			<feMerge><feMergeNode /><feMergeNode in='SourceGraphic' /></feMerge>
		</filter>
		<filter id='drop-shadow-ratings' x='-1000%' y='-1000%' width='2100%' height='2100%'>
			<feGaussianBlur in='SourceAlpha' stdDeviation='.05' />
			<feOffset dx='.07' dy='.07' result='b' />
			<feFlood flood-color='rgba(0,0,0,.5)' />
			<feComposite in2='b' operator='in' />
			<feMerge><feMergeNode /><feMergeNode in='SourceGraphic' /></feMerge>
		</filter>
	</defs>
</svg>
<h1>Quantum Online Puzzle Hunt</h1>
<menu class='stats'>
	<li><a href='#' class='show' data-show='team-solves'>Team Solves</a></li>
	<li><a href='#' class='show' data-show='completionists'>Completionists</a></li>
	<li><a href='#' class='show' data-show='puzzle-stats'>Puzzle Stats</a></li>
	<li><a href='#' class='show' data-show='common-wrong-answers'>Common Wrong Answers (spoilers!)</a></li>
</menu>
<script>
	let selection = localStorage.getItem('qoph-stats');
	let validSelections = Array.from(document.querySelectorAll('menu>li>a.show')).map(a => a.dataset.show);
	if (!validSelections.includes(selection))
		selection = validSelections[0];
	function show() {
		Array.from(document.querySelectorAll('div.section')).forEach(section => {
			if (section.id === selection)
				section.classList.add('shown');
			else
				section.classList.remove('shown');
		});
		Array.from(document.querySelectorAll('menu>li>a.show')).forEach(a => {
			if (a.dataset.show === selection)
				a.classList.add('selected');
			else
				a.classList.remove('selected');
		});
	}
	Array.from(document.querySelectorAll('menu a.show')).forEach(a => {
		a.onclick = function() {
			selection = a.dataset.show;
			localStorage.setItem('qoph-stats', selection);
			show();
			return false;
		};
	});
</script>
<div id='team-solves' class='section'>
	<h2>Team Solves</h2>
	{{team-solve-table}}
</div>
<div id='completionists' class='section'>
	<h2>Completionists</h2>
	{{completionists}}
	<script>
		let teams = Array.from(document.querySelectorAll('#completionists .legend > .item'));
		let teamLines = Array.from(document.querySelectorAll('#completionists svg.diagram > path.line'));
		teams.forEach(item => {
			let ix = item.dataset.item | 0;
			item.onmouseover	= function() { console.log(`ov ${ix}`); teamLines.forEach(line => { line.setAttribute('opacity', ((line.dataset.item) | 0) === ix ? 1 : .05); }); };
			item.onmouseout	= function() { console.log(`ou ${ix}`); teamLines.forEach(line => { line.setAttribute('opacity', 1); }); };
		});
	</script>
</div>
<div id='common-wrong-answers' class='section'>
	<h2>Common Wrong Answers</h2>
	{{common-wrong-answers}}
</div>
<div id='puzzle-stats' class='section'>
	<h2>Puzzle Stats</h2>
	{{puzzle-stats}}
	<script>
		let puzzles = Array.from(document.querySelectorAll('#puzzle-stats .legend > .item'));
		let puzzleLines = Array.from(document.querySelectorAll('#puzzle-stats svg.ratings > path.line'));
		puzzles.forEach(item => {
			let ix = item.dataset.item | 0;
			item.onmouseover	= function() { puzzleLines.forEach(line => { line.setAttribute('opacity', ((line.dataset.item) | 0) === ix ? 1 : .05); }); };
			item.onmouseout	= function() { puzzleLines.forEach(line => { line.setAttribute('opacity', 1); }); };
		});
	</script>
</div>
<script>
	show();
</script>