<style>
	.ihs { visibility: hidden; }
	.ihs.shown, .ihs.cwp, .ihs.cwp-1, .ihs.cwp-2 { visibility: visible; }
	svg * { pointer-events: none; }

	path.face {
		fill: hsl(220, 60%, 95%);
		pointer-events: fill;
	}
		#main-svg:not(.nc) path.face.c0 { fill: hsl(  0, 80%, 80%); }
		#main-svg:not(.nc) path.face.c1 { fill: hsl( 90, 80%, 80%); }
		#main-svg:not(.nc) path.face.c2 { fill: hsl(180, 80%, 80%); }
		#main-svg:not(.nc) path.face.c3 { fill: hsl(270, 80%, 80%); }

		path.face.cwh-1 { fill: hsl(0, 80%, 80%); }
		path.face.cwh-2 { fill: hsl(120, 80%, 80%); }
		path.face.cwh-1.cwh-2 { fill: hsl(60, 80%, 60%); }

		.ihs.cwp-1 > path { fill: hsl(0, 80%, 80%); }
		.ihs.cwp-2 > path { fill: hsl(120, 80%, 80%); }

	path.edge {
		fill: none;
		stroke: hsl(220, 30%, 60%);
		stroke-width: .02;
		stroke-linecap: round;
	}
		path.edge.locked {
			stroke: black;
			stroke-width: .04;
		}
	path.connection {
		fill: none;
		stroke: hsl(220, 30%, 70%);
		stroke-width: .01;
	}

	.cyan-reveal-1 .cyan-clue-1 { fill: red; }

	.cyan-reveal-2 .cyan-clue-2,
	.cyan-reveal-3 .cyan-clue-3,
	.pink-reveal-1 .pink-clue-1,
	.pink-reveal-2 .pink-clue-2,
	.radio-reveal-1 .radio-clue-1,
	.radio-reveal-2 .radio-clue-2 {
		visibility: visible;
	}
</style>
<script src='../../files/solutions.js'></script>
<h1>Face to Face</h1>
<script>
let reveals = {}, hintReveals = {}, curTab = null;
let faceData = /*Faces-start*/[
	{ c: [ 1, 1, 1, 1, 1, 1 ], v: [ 13, 1, 18, 19, 3, 18 ], cc: "GAMBOGE", ci: 3, lb: 1, s: { t: "Magnolia (Playboi Carti)", l: "In New York I Milly Rock, hide it in my...", n: "Sock" }, item: "a pile of trash", e: [ { pn: 41, face: 1 }, { pn: 40, cm: "(clue)", cmx: -.60, cmy: -.81, cma: -176.28, face: 18 }, { cm: "+0", cmx: -1.04, cmy: -.56, cma: 118.53, face: 10 }, { face: 11 }, { pn: 47, face: 3 } ] },
	{ c: [ 1, 1, 1, 1, 1, 1 ], v: [ 16, 14, 9, 8, 11, 16 ], cc: "PINK", ci: 1, lb: 14, s: { t: "Holding Out for a Hero (Bonnie Tyler)", l: "And where are all the Gods? Where’s the streetwise...", n: "Hercules" }, item: "a body spray", e: [ { pn: 41, cm: "+7", cmx: .36, cmy: -.21, cma: -30.34, face: 2 }, { pn: 22, face: 15 }, { face: 17 }, { pn: 33, face: 18 }, { pn: 40, face: 0 } ] },
	{ c: [ null, null, null, null, null, 2 ], v: [ 5, 20, 10, 24, 5, 4 ], cc: "WHITE", ci: 5, lb: 20, s: { t: "The Elements (Tom Lehrer)", l: "... also mendelevium, einsteinium, nobelium, and argon, krypton, neon, radon, ...", n: "Xenon" }, item: "a bucket of orange paint", e: [ { pn: 41, cm: "(clue)", cmx: .27, cmy: .32, cma: 50.41, face: 3 }, { pn: 36, face: 20 }, { pn: 46, face: 14 }, { cm: "−10", cmx: .97, cmy: -.26, cma: -145.15, face: 15 }, { pn: 22, face: 1 } ] },
	{ c: [ null, null, 3, 2, null, 2 ], v: [ 4, 11, 4, 14, 6, 14 ], cc: "JADE", ci: 3, lb: 11, s: { t: "Everybody Wants to Rule the World (Tears for Fears)", l: "Acting on your best behaviour, turn your back on mother...", n: "Nature" }, item: "a worm", e: [ { pn: 41, face: 0 }, { pn: 47, cm: "−1", cmx: -.89, cmy: .46, cma: 102.97, face: 11 }, { face: 23 }, { face: 20 }, { pn: 36, cm: "(clue)", cmx: .02, cmy: .42, cma: -92.60, face: 2 } ] },
	{ c: [ null, null, 2, 1, null, null ], v: [ 6, 6, 20, 13, 7, 6 ], cc: "FUCHSIA", ci: 1, lb: 6, s: { t: "Shape of You (Ed Sheeran)", l: "I’m in love with the shape of you. We push and pull like a...", n: "Magnet" }, item: "a doormat", e: [ { pn: 59, face: 5 }, { face: 22 }, { pn: 49, cm: "+1", cmx: -3.06, cmy: -.54, cma: -27.41, face: 8 }, { pn: 55, face: 9 }, { face: 7 } ] },
	{ c: [ null, null, 2, 1, null, null ], v: [ 7, 8, 24, 2, 8, 7 ], cc: "GAMBOGE", ci: 1, lb: 8, s: { t: "Blinding Lights (The Weekend)", l: "So I hit the road in overdrive...", n: "Baby" }, item: "a copy of the album “So Much Fun”", e: [ { pn: 59, cm: "+3", cmx: -4.03, cmy: -1.62, cma: -176.28, face: 6 }, { pn: 36, face: 13 }, { pn: 50, cm: "(clue)", cmx: -4.55, cmy: -.88, cma: 53.34, face: 21 }, { face: 22 }, { face: 4 } ] },
	{ c: [ null, null, null, null, null, null ], v: [ 22, 2, 7, 4, 10, 8 ], cc: "VIOLET", ci: 1, lb: 2, s: { t: "Imagine (John Lennon)", l: "... sharing all the world, yoo-hoo... You may say I’m a...", n: "Dreamer" }, item: "a beaker of alkaline solution", e: [ { pn: 59, face: 7 }, { pn: 21, face: 16 }, { pn: 32, cm: "+3", cmx: 2.05, cmy: -1.82, cma: 50.41, face: 12 }, { pn: 31, cm: "(clue)", cmx: 2.52, cmy: -1.67, cma: -14.78, face: 13 }, { pn: 36, face: 5 } ] },
	{ c: [ null, null, null, null, null, null ], v: [ 8, 4, 8, 10, 13, 10 ], cc: "WHITE", ci: 2, lb: 4, s: { t: "Royals (Lorde)", l: "We’re driving Cadillacs in our dreams, but everybody’s like Cristal, Maybach, diamonds on your timepiece...", n: "Jet" }, item: "a bottle of salty water", e: [ { pn: 59, face: 4 }, { face: 9 }, { cm: "−10", cmx: -1.47, cmy: -2.31, cma: -30.34, face: 19 }, { pn: 30, face: 16 }, { pn: 21, face: 6 } ] },
	{ c: [ 1, 1, 1, 1, 1, 1 ], v: [ 12, 3, 12, 7, 12, 3 ], cc: "VIOLET", ci: 4, lb: 3, s: { t: "Space Oddity (David Bowie)", l: "Take your protein pills and put your helmet on...", n: "Ground" }, item: "a nail", e: [ { face: 9 }, { pn: 55, cm: "−5", cmx: -2.70, cmy: .59, cma: 84.47, face: 4 }, { pn: 49, face: 22 }, { pn: 55, cm: "(clue)", cmx: -1.91, cmy: .87, cma: -45.90, face: 23 }, { face: 11 } ] },
	{ c: [ null, null, 3, 1, 3, null ], v: [ 10, 16, 23, 21, 18, 11 ], cc: "JADE", ci: 1, lb: 16, s: { t: "Eternal Flame (The Bangles)", l: "Can you feel my heart beating? Do you...", n: "Understand" }, item: "a box of matches", e: [ { face: 10 }, { cm: "+10", cmx: -2.07, cmy: -1.36, cma: -142.22, face: 19 }, { face: 7 }, { face: 4 }, { pn: 55, face: 8 } ] },
	{ c: [ null, null, 3, null, null, null ], v: [ 11, 12, 15, 11, 14, 12 ], cc: "PINK", ci: 4, lb: 12, s: { t: "Africa (Toto)", l: "I know that I must do what’s right, as sure as...", n: "Kilimanjaro" }, item: "a copy of the funnies with their beginning and end torn off and the rest scrambled", e: [ { face: 11 }, { cm: "+0", cmx: -1.04, cmy: -.56, cma: -61.47, face: 0 }, { face: 18 }, { pn: 44, face: 19 }, { face: 9 } ] },
	{ c: [ 1, 1, 1, 1, 1, 1 ], v: [ 1, 25, 25, 1, 15, 1 ], cc: "AQUA", ci: 1, lb: 25, s: { t: "Lemon Tree (Fools Garden)", l: "I’m sitting here in a boring room, it’s just another rainy Sunday...", n: "Afternoon" }, item: "a piercing", e: [ { face: 8 }, { cm: "(clue)", cmx: -1.40, cmy: .68, cma: 3.72, face: 23 }, { cm: "+0", cmx: -.97, cmy: .43, cma: -61.47, face: 3 }, { pn: 47, face: 0 }, { face: 10 } ] },
	{ c: [ 2, 2, 1, 1, 2, 1 ], v: [ 18, 21, 19, 25, 19, 20 ], cc: "AZURE", ci: 4, lb: 21, s: { t: "Yellow Submarine (The Beatles)", l: "And we lived beneath the waves in our...", n: "Yellow" }, item: "a bottle of anticonvulsants", e: [ { pn: 41, cm: "+13", cmx: 2.06, cmy: -1.21, cma: -64.40, face: 13 }, { pn: 31, face: 6 }, { pn: 32, face: 16 }, { pn: 36, face: 17 }, { face: 15 } ] },
	{ c: [ null, null, 2, null, null, null ], v: [ 14, 22, 5, 15, 16, 13 ], cc: "ONYX", ci: 2, lb: 22, s: { t: "Bohemian Rhapsody (Queen)", l: "... caught in a landslide, no escape from reality...", n: "Open" }, item: "a copy of the third Super Smash Bros. game", e: [ { pn: 41, face: 14 }, { pn: 40, face: 21 }, { pn: 50, face: 5 }, { pn: 36, cm: "+8", cmx: 2.98, cmy: .03, cma: -111.09, face: 6 }, { pn: 31, face: 12 } ] },
	{ c: [ null, null, 2, null, null, null ], v: [ 9, 15, 14, 16, 21, 19 ], cc: "WHITE", ci: 3, lb: 15, s: { t: "I’m Still Standing (Elton John)", l: "After all this time, picking up the...", n: "Pieces" }, item: "a kitchen sink", e: [ { pn: 41, face: 15 }, { face: 2 }, { pn: 46, cm: "+14", cmx: 1.35, cmy: .67, cma: 34.85, face: 20 }, { pn: 57, face: 21 }, { pn: 40, face: 13 } ] },
	{ c: [ 2, 2, 1, 1, 2, 1 ], v: [ 2, 19, 3, 12, 9, 5 ], cc: "GAMBOGE", ci: 4, lb: 19, s: { t: "Stronger (Kanye West)", l: "Bow in the presence of greatness, ’cause right now thou hast forsaken us. You should be honored by my...", n: "Lateness" }, item: "a painting of Queen Victoria", e: [ { pn: 41, face: 12 }, { cm: "−9", cmx: .93, cmy: -1.17, cma: 149.66, face: 17 }, { face: 1 }, { pn: 22, face: 2 }, { face: 14 } ] },
	{ c: [ 2, 2, null, 1, 3, null ], v: [ 15, 13, 6, 3, 2, 21 ], cc: "VIOLET", ci: 3, lb: 13, s: { t: "Still Alive (Jonathan Coulton)", l: "... there’s no sense crying over every mistake. You just keep on trying till you run out of...", n: "Cake" }, item: "a plush toy", e: [ { pn: 46, face: 17 }, { pn: 36, cm: "+14", cmx: 1.01, cmy: -2.26, cma: -61.47, face: 12 }, { pn: 32, face: 6 }, { pn: 21, face: 7 }, { pn: 30, face: 19 } ] },
	{ c: [ null, null, null, null, null, 2 ], v: [ 25, 18, 11, 22, 22, 24 ], cc: "ONYX", ci: 3, lb: 18, s: { t: "Take Me Home, Country Roads (John Denver)", l: "... I belong, West...", n: "Virginia" }, item: "a toy railway car", e: [ { pn: 46, face: 18 }, { pn: 33, face: 1 }, { cm: "+10", cmx: .88, cmy: -1.23, cma: -45.90, face: 15 }, { face: 12 }, { pn: 36, face: 16 } ] },
	{ c: [ null, null, null, null, null, null ], v: [ 20, 10, 13, 23, 23, 22 ], cc: "WHITE", ci: 4, lb: 10, s: { t: "Angels (Robbie Williams)", l: "... whether I’m right or wrong. And down the...", n: "Waterfall" }, item: "a frozen cube", e: [ { pn: 46, face: 19 }, { pn: 44, face: 10 }, { cm: "+7", cmx: -.60, cmy: -.81, cma: 3.72, face: 0 }, { pn: 40, face: 1 }, { pn: 33, face: 17 } ] },
	{ c: [ 2, null, null, 1, 3, null ], v: [ 19, 23, 16, 18, 1, 23 ], cc: "FUCHSIA", ci: 5, lb: 23, s: { t: "Mr. Blue Sky (Electric Light Orchestra)", l: "Hey you with the pretty face, welcome to the human...", n: "Race" }, item: "a piece of banister", e: [ { pn: 46, face: 16 }, { pn: 30, cm: "(clue)", cmx: -1.47, cmy: -2.31, cma: 149.66, face: 7 }, { cm: "+16", cmx: -1.70, cmy: -1.87, cma: 84.47, face: 9 }, { face: 10 }, { pn: 44, face: 18 } ] },
	{ c: [ null, null, null, 2, null, null ], v: [ 21, 26, 22, 9, 24, 25 ], cc: "AQUA", ci: 3, lb: 26, s: { t: "Barbie Girl (Aqua)", l: "You can brush my hair, undress me everywhere...", n: "Imagination" }, item: "a rat", e: [ { pn: 86, face: 21 }, { pn: 57, cm: "+4", cmx: .44, cmy: 1.49, cma: -77.03, face: 14 }, { pn: 46, face: 2 }, { pn: 36, face: 3 }, { face: 23 } ] },
	{ c: [ null, null, null, 2, null, null ], v: [ 24, 7, 21, 20, 25, 26 ], cc: "ONYX", ci: 4, lb: 7, s: { t: "God’s Plan (Drake)", l: "She say, “Do you love me?” I...", n: "Tell" }, item: "a book of jokes", e: [ { pn: 86, cm: "(clue)", cmx: -.30, cmy: 2.35, cma: 68.91, face: 22 }, { cm: "+6", cmx: .15, cmy: 2.76, cma: 3.72, face: 5 }, { pn: 50, face: 13 }, { pn: 40, face: 14 }, { pn: 57, face: 20 } ] },
	{ c: [ 0, 0, 0, 0, 0, 0 ], v: [ 17, 17, 17, 17, 17, 17 ], cc: "AQUA", ci: 2, lb: 17, s: { t: "Rasputin (Boney M.)", l: "Ra-Ra-Rasputin, lover of the Russian...", n: "Queen" }, item: "a pile of mud", e: [ { pn: 86, face: 23 }, { pn: 55, face: 8 }, { pn: 49, face: 4 }, { cm: "(clue)", cmx: -2.98, cmy: 1.59, cma: 68.91, face: 5 }, { cm: "−2", cmx: -2.45, cmy: 1.89, cma: 3.72, face: 21 } ] },
	{ c: [ null, null, null, null, null, 2 ], v: [ 26, 24, 26, 26, 26, 9 ], cc: "AZURE", ci: 2, lb: 24, s: { t: "Wannabe (Spice Girls)", l: "... wanna (ha), I wanna (ha), I wanna (ha), I wanna (ha), I wanna really really really wanna...", n: "Zigazig" }, item: "a bottle of spirits", e: [ { pn: 86, face: 20 }, { face: 3 }, { cm: "(clue)", cmx: -1.40, cmy: .68, cma: -176.28, face: 11 }, { cm: "−5", cmx: -1.84, cmy: .92, cma: 118.53, face: 8 }, { pn: 55, face: 22 } ] }]/*Faces-end*/;
makeSolutionPage('face-to-face', `
<p>The first thing to do is [s to map out the world. [ra We’ve marked locked doors with a thicker line. This, coupled with the tilt you experience as you walk between rooms, implies that [d we’re on the surface of a polyhedron. (Specifically, it’s a pentagonal icositetrahedron.)]]]</p>
{-a
<p>Every room has [o six different types of clues in it, which form [db six individual subpuzzles. They can be attempted in any order.]]</p>
{-b
▲subpuzzles
•carpet Carpets
	<p>Each room has a carpet. [o Each carpet has a specific size (number of repetitions of the pattern), and clicking on the carpet tells us its color. Many colors have rare letters in them — “onyx”, “jade” and “aqua” for instance. This suggests (and it is confirmed by the hint from the previous subpuzzle) [d that we should extract a letter from the color name, and the carpet’s size provides the index. [rcarpetR]]]</p>
	{-carpetR <p>This also contains a hint for the next subpuzzle: [rcarpetH «CYAN SUM».]</p>}

•cyan Cyan numbers
	<p>Some doors have cyan numbers on them. [o The numbers on opposite sides of the same door are always the same. Together with the hint from the previous subpuzzle, this suggests that [d we need to find a value for each room such that the cyan numbers equal the sum of two adjacent rooms. [ocyan1 There’s one place where the sums for three pairwise adjacent rooms are available (marked in red below). [s This creates a simple system of three linear equations. Once that is solved, all the other values can be directly calculated from the sums. [rcyan2 These values [o are all in the range 1–26, so [scyan3 we convert them to letters.]]]]]]]</p>
	{-cyan3 <p>This also contains a hint for the next subpuzzle: [rcyanH «PINK SUM».]</p>}

•pink Pink numbers
	<p>Some rooms have pink numbers in the corners. [o The numbers on opposite sides of the same wall are always the same. Together with the hint from the previous subpuzzle, this suggests that [d we need to find a value for each room such that the pink numbers equal the sum of the rooms that share the same corner. [s This creates a system of 24 linear equations in 24 variables. (Aside: there’s technically a subset of 17 clues involving 17 rooms that could be solved first, but given the effort required to find that subset, it’s easier to just solve the full 24-equation system directly.) Once solved, [rpink1 these values [o are all in the range 1–26, so [spink2 we convert them to letters.]]]]]]</p>
	{-pink2 <p>This also contains a hint for the next subpuzzle: [rpinkH «LYRICS NEXT WORD».]</p>}

•radio Radio
	<p>The radio in every room, [o when clicked, plays a fragment of music that stops at a seemingly specific point. This suggests (and it is confirmed by the hint from the previous subpuzzle) that [s we should find the next word in the lyrics of these songs. [rradio1 (Hover over the diagram to see the lyrics, songs and authors.) We find that these words [dradio2 all start with different letters, so those first letters are likely relevant.]]]]</p>
	{-radio2 <p>This also contains a hint for the next subpuzzle: [rradioH «GASHLYCRUMB TIN».]</p>}

•box Boxes
	<p>Each room has a box. [o When clicked, the voice in your head tells you what’s in the box. What these things are is virtually unguessable without the hint from the previous subpuzzle. [r The hint is «GASHLYCRUMB TIN», which [s Google will happily auto-complete to <a href='http://holyjoe.org/poetry/gorey.htm'><cite>Gashlycrumb Tinies</cite></a>, an illustrated poem by Edward Gorey in which 26 children with names starting A–Z meet every variety of gruesome death. The items in the boxes can be uniquely associated with lines from the poem. [rboxR]]]]</p>
	{-boxR <p>This also contains a hint for the next subpuzzle: [rboxH «LOCK IS BAR».]</p>}

•door Door signs
	<p>Some doors have signs hanging off the doorknobs with either a crossword clue on them, or a number with a plus or minus sign. It stands to reason that we should [s fill the map with the answers to the clues, one letter per room, like it’s a wonky crossword. Coupled with the hint from the previous subpuzzle, [d the locked doors tell us where words start and end (like a barred crossword). Another thing that helps (but isn’t hinted) is that the words never make a sharp angle (so there are only two directions to choose from after every letter, not four) and the clue is similarly placed at the “start” of the word (not at a sharp angle). The solution to the crossword is [rdoor1 below. However, if you’ve already solved any of the other subpuzzles, you expect that all letters should be unique. Well, this is where [d the plus/minus numbers come in. After applying these Caesar offsets, we get the actual solution. [rdoor2]]]]]</p>
	{-door2 <p>This also contains a hint for the next subpuzzle: [rdoorH «CARPET INDEX».]</p>}

▼
}
<svg xmlns="http://www.w3.org/2000/svg" stroke-width=".02" viewBox="-5.33 -3.83 9 7.11" text-anchor="middle" id='main-svg'>
	<path class="connection" d="M-.16-1.05-.1-1"/>
	<path class="connection" d="M-.3 2.35c-.4.15-2.18-.04-2.15-.46"/>
	<path class="connection" d="M-.47 1.54c-.42.01-.42.3-.72.01"/>
	<path class="connection" d="M-.9.46-.96.43"/>
	<path class="connection" d="M-1.07-1.06-1-1.1"/>
	<path class="connection" d="M-1.24-2.76c.3-.03 1.69-.46 1.75-.17"/>
	<path class="connection" d="M-1.6-.22v-.11"/>
	<path class="connection" d="M-1.97-2.33c-.17.24-.73.66-.6.92"/>
	<path class="connection" d="M-2.07-1.36c.19-.24.08-.48.37-.51"/>
	<path class="connection" d="M-2.37.08c-.17-.29-.17-.29-.04-.6"/>
	<path class="connection" d="M-2.88 1.1C-3.09.9-3.74-.35-3.56-.6"/>
	<path class="connection" d="M-3.06-.54c.13.26.06 1.16.36 1.13"/>
	<path class="connection" d="M-3.22-1.43c.16-.39.67-1.56 1.08-1.49"/>
	<path class="connection" d="M-4.03-1.62c.01-.1.1-.82.74-1.28a5.41 5.41 0 0 1 2.67-.7c.89-.05 2.63.28 3.3.66.69.38.53.8.2.78"/>
	<path class="connection" d="M-4.09-.7c.07.28.83 2.4 1.11 2.29"/>
	<path class="connection" d="M-4.55-.88c-.12.09.4 1.9 1.6 2.83 1.2.92 3.09.96 3.1.81"/>
	<path class="connection" d="M-4.59-1.38c-.23-.14-.79.31-.3 1.32.5 1.01 2.22 2.68 3.18 2.94.97.26 2.8.2 3.72-.43.92-.65 1.03-1.71.87-1.93"/>
	<path class="connection" d="M.12-2.46c-.4-.1-.75-.11-.99.24"/>
	<path class="connection" d="M.27 1.02C.45.8.9.86.82.57"/>
	<path class="connection" d="M.55 2.02C.8 1.84 2 .94 1.85.7"/>
	<path class="connection" d="M1.01-2.26c.26.14.49 0 .56.28"/>
	<path class="connection" d="M1.35.67c-.17.24-.62.9-.9.82"/>
	<path class="connection" d="M1.99-2.32c-.27-.13-.78-.61-1.01-.44"/>
	<path class="connection" d="M2.39.64C2.29.92.85 2.66.59 2.52"/>
	<path class="connection" d="M2.45-.27c.03-.42-.01-.76-.4-.94"/>
	<path class="connection" d="M2.52-1.67c.08.29.73 1.6.46 1.7"/>
	<path class="connection" d="M2.54-2.58c0-.42-4.07-1.01-4.2-.61"/>
	<path class="connection" d="m-1 .97.28-.04"/>
	<path class="connection" d="m-1.39-1.48-.15.24"/>
	<path class="connection" d="m-1.84.92-.07-.05"/>
	<path class="connection" d="m-2.07 1.5.34.02"/>
	<path class="connection" d="m.07-1.63-.34-.02"/>
	<path class="connection" d="m.27.32-.25.1"/>
	<path class="connection" d="m.88-1.23.05.06"/>
	<path class="connection" d="m1-.33-.03.07"/>
	<path class="connection" d="m1.23-1.6-.25-.12"/>
	<path class="connection" d="m1.62-.2-.04-.33"/>

	<path class="face" id="face-0" d="m0 0-.3-.79-.6-.03-.28.52.36.47z"/>
	<path class="face" id="face-1" d="m0 0 .73-.43-.06-.59-.56-.2-.41.43z"/>
	<path class="face" id="face-2" d="M0 0l.54.65L1.1.5l.1-.59-.48-.34z"/>
	<path class="face" id="face-3" d="M0 0l-.82.17-.14.58.47.36.53-.27z"/>
	<path class="face" id="face-4" d="M-3.6-1.59l-.2.82.47.37.53-.28-.03-.59z"/>
	<path class="face" id="face-5" d="M-3.6-1.59l-.85-.05-.28.52.35.47.58-.12z"/>
	<path class="face" id="face-6" d="M2.96-2.58l-.84-.01l-.26.53.38.46.57-.16z"/>
	<path class="face" id="face-7" d="M-2.07-3.33l-.14.83.48.34.52-.3-.06-.6z"/>
	<path class="face" id="face-8" d="M-2-.13l-.73.43.06.59.56.2.41-.43z"/>
	<path class="face" id="face-9" d="M-2.02-.36l.19-.82-.47-.36-.53.27.03.6z"/>
	<path class="face" id="face-10" d="M-2.02-.36l.84.06.28-.52-.35-.48-.58.12z"/>
	<path class="face" id="face-11" d="M-2-.13l.3.79.6.03.28-.52-.36-.47z"/>
	<path class="face" id="face-12" d="M1.87-.83l.37-.76-.38-.46-.57.15-.1.58z"/>
	<path class="face" id="face-13" d="M2.03-.3l.08.84.56.2.41-.43-.21-.56z"/>
	<path class="face" id="face-14" d="M2.03-.3 1.2-.1l-.1.59.49.34.51-.3z"/>
	<path class="face" id="face-15" d="m1.87-.83-.69-.49-.51.3.06.6.56.19z"/>
	<path class="face" id="face-16" d="M.04-2.05.87-2l.28-.52-.35-.47-.58.12z"/>
	<path class="face" id="face-17" d="m.03-2.05.08.84.56.2.41-.43L.87-2z"/>
	<path class="face" id="face-18" d="m-.52-1.98-.59.6.21.56.6.03.28-.52z"/>
	<path class="face" id="face-19" d="M-.52-1.98l-.7-.48-.5.3.05.59.56.2z"/>
	<path class="face" id="face-20" d="M-.45 1.96l.82-.18.14-.57L.04.84l-.53.27z"/>
	<path class="face" id="face-21" d="M-.45 1.96l.3.78.6.04.28-.52-.36-.48z"/>
	<path class="face" id="face-22" d="M-2.03 1.92l-.08-.84-.56-.2-.42.43.22.56z"/>
	<path class="face" id="face-23" d="m-1.48 1.85.58-.6-.22-.56-.59-.03-.28.52z"/>

	<path class="edge" d="m2.67.73.41-.42"/>
	<path class="edge" d="m2.12-2.59-.26.54"/>
	<path class="edge" d="m2.11.54.55.2"/>
	<path class="edge" d="m2.03-.3.08.84"/>
	<path class="edge" d="m1.6.84.51-.3"/>
	<path class="edge" d="m1.29-.23.58-.6"/>
	<path class="edge" d="m1.21-.09-.1.59"/>
	<path class="edge" d="m1.18-1.32.7.49"/>
	<path class="edge" d="m0 0-.82.17"/>
	<path class="edge" d="m.37 1.78-.82.18"/>
	<path class="edge" d="m.11-1.21.56.2"/>
	<path class="edge" d="m.04.84-.53.27"/>
	<path class="edge" d="m-4.45-1.64-.28.52"/>
	<path class="edge" d="m-3.8-.77.2-.82"/>
	<path class="edge" d="m-2.83-1.27-.78-.32"/>
	<path class="edge" d="m-2.8-.68-.03-.59"/>
	<path class="edge" d="m-2.67.89-.42.42"/>
	<path class="edge" d="m-2.3-1.54-.53.27"/>
	<path class="edge" d="m-2.11 1.08-.56-.2"/>
	<path class="edge" d="m-2.07-3.33-.14.83"/>
	<path class="edge" d="m-2.03 1.92-.08-.84"/>
	<path class="edge" d="m-2.02-.36.19-.82"/>
	<path class="edge" d="m-1.98 1.18.5.67"/>
	<path class="edge" d="m-1.48 1.85.58-.6"/>
	<path class="edge" d="m-1.27-3.06-.8-.27"/>
	<path class="edge" d="m-1.1-1.38.58-.6"/>
	<path class="edge" d="m-1.1-1.38.2.56"/>
	<path class="edge" d="m-.96.75.47.36"/>
	<path class="edge" d="m-.9-.82-.35-.48"/>
	<path class="edge" d="m-.49 1.11.04.85"/>
	<path class="edge" d="m-.3-.79.28-.51"/>
	<path class="edge" d="m-.02-1.3-.5-.68"/>
	<path class="edge" d="M2.96-2.58l-.84-.01"/>
	<path class="edge" d="M2.03-.3 1.2-.1"/>
	<path class="edge" d="M1.29-1.9l-.1.58"/>
	<path class="edge" d="M1.15-2.52.8-2.99"/>
	<path class="edge" d="M1.08-1.44.87-2"/>
	<path class="edge" d="M.73 2.26l-.36-.48"/>
	<path class="edge" d="M.67-1.02l.06.6"/>
	<path class="edge" d="M.54.65 1.1.5"/>
	<path class="edge" d="M.5 1.2.05.85"/>
	<path class="edge" d="M.44 2.78l.29-.52"/>
	<path class="edge" d="M.22-2.87l-.19.82"/>
	<path class="edge" d="M.11-1.21-.3-.8"/>
	<path class="edge" d="M.04-2.05.87-2"/>
	<path class="edge" d="M.03-2.05l.08.84"/>
	<path class="edge" d="M-3.8-.77l.47.37"/>
	<path class="edge" d="M-2.8-.68l.78.32"/>
	<path class="edge" d="M-2.21-2.5l.48.34"/>
	<path class="edge" d="M-2.02-.36l.84.06"/>
	<path class="edge" d="M-2-.13l-.73.43"/>
	<path class="edge" d="M-1.7.66-2-.13"/>
	<path class="edge" d="M-1.18-.3-2-.13"/>
	<path class="edge" d="M-.9 1.25l-.2-.56"/>
	<path class="edge" d="M-.82.17l-.36-.47"/>
	<path class="edge" d="M-.52-1.98l-.7-.48"/>
	<path class="edge" d="M-.3-.79 0 0"/>
	<path class="edge locked" d="m2.81-1.75.15-.83"/>
	<path class="edge locked" d="m2.24-1.6.57-.15"/>
	<path class="edge locked" d="m1.86-2.05.38.46"/>
	<path class="edge locked" d="m1.18-1.32-.51.3"/>
	<path class="edge locked" d="m1.11.5.49.34"/>
	<path class="edge locked" d="m.87-2 .28-.52"/>
	<path class="edge locked" d="m.73-.43.56.2"/>
	<path class="edge locked" d="m.67-1.02.41-.42"/>
	<path class="edge locked" d="m-4.73-1.12.35.47"/>
	<path class="edge locked" d="m-4.38-.65.58-.12"/>
	<path class="edge locked" d="m-3.09 1.31.22.56"/>
	<path class="edge locked" d="m-2.73.3.06.59"/>
	<path class="edge locked" d="m-1.83-1.18-.47-.36"/>
	<path class="edge locked" d="m-1.73-2.16.52-.3"/>
	<path class="edge locked" d="m-1.7.66-.28.52"/>
	<path class="edge locked" d="m-1.25-1.3-.58.12"/>
	<path class="edge locked" d="m-1.21-2.46-.06-.6"/>
	<path class="edge locked" d="m-1.1.7-.6-.04"/>
	<path class="edge locked" d="m-.82.17-.14.58"/>
	<path class="edge locked" d="m-.15 2.74.6.04"/>
	<path class="edge locked" d="M3.08.3l-.21-.55"/>
	<path class="edge locked" d="M2.87-.25 2.03-.3"/>
	<path class="edge locked" d="M1.87-.83l.37-.76"/>
	<path class="edge locked" d="M1.86-2.05l-.57.15"/>
	<path class="edge locked" d="M1.21-.09.73-.43"/>
	<path class="edge locked" d="M0 0l.54.65"/>
	<path class="edge locked" d="M.8-3l-.58.13"/>
	<path class="edge locked" d="M.73-.43 0 0"/>
	<path class="edge locked" d="M.37 1.78l.14-.57"/>
	<path class="edge locked" d="M.04.84 0 0"/>
	<path class="edge locked" d="M-3.6-1.59l-.85-.05"/>
	<path class="edge locked" d="M-3.33-.4l.53-.28"/>
	<path class="edge locked" d="M-2.87 1.87l.84.05"/>
	<path class="edge locked" d="M-2.11 1.08l.41-.42"/>
	<path class="edge locked" d="M-1.73-2.16l.06.59"/>
	<path class="edge locked" d="M-1.67-1.57l.56.2"/>
	<path class="edge locked" d="M-1.18-.3l.28-.52"/>
	<path class="edge locked" d="M-1.1.7l.28-.53"/>
	<path class="edge locked" d="M-.9-.82l.6.03"/>
	<path class="edge locked" d="M-.45 1.96l.3.78"/>

	<g id='svg-extra'></g>
</svg>

{-b <p>To help confirm the answers to the subpuzzles, [o they all have the letter «Q» in the same place, and the hint for the next subpuzzle starts in the same place (next to the «Q»).]</p>}
{-b <p>To bring it all together, we note that [o each subpuzzle solution has 24 different letters of the alphabet. The missing letters are [r «EI»&nbsp;(carpets), «CW»&nbsp;(cyan numbers), «AB»&nbsp;(pink numbers), «EF»&nbsp;(radio), «DT»&nbsp;(boxes) and «BO»&nbsp;(door signs). [o These pairs contain the letters «A», «B», «C», «D», «E», «F», which means [s we can reorder them and extract the other letter. [rc]]]]]</p>}
{-c <div class='answer'>BOW TIE</div>}
}
`, {
	subpuzzles	: setupSvg,
	carpetR	: function() { reveals.carpet	= true;	setupSvg(curTab); },
	cyan1	: function() { reveals.cyan	= 1;	setupSvg(curTab); },
	cyan2	: function() { reveals.cyan	= 2;	setupSvg(curTab); },
	cyan3	: function() { reveals.cyan	= 3;	setupSvg(curTab); },
	pink1	: function() { reveals.pink	= 1;	setupSvg(curTab); },
	pink2	: function() { reveals.pink	= 2;	setupSvg(curTab); },
	radio1	: function() { reveals.radio	= 1;	setupSvg(curTab); },
	radio2	: function() { reveals.radio	= 2;	setupSvg(curTab); },
	boxR	: function() { reveals.box	= true;	setupSvg(curTab); },
	door1	: function() { reveals.door	= 1;	setupSvg(curTab); },
	door2	: function() { reveals.door	= 2;	setupSvg(curTab); },

	carpetH	: function() { hintReveals.carpet	= true;	setupSvg(curTab); },
	cyanH	: function() { hintReveals.cyan	= true;	setupSvg(curTab); },
	pinkH	: function() { hintReveals.pink	= true;	setupSvg(curTab); },
	radioH	: function() { hintReveals.radio	= true;	setupSvg(curTab); },
	boxH	: function() { hintReveals.box	= true;	setupSvg(curTab); },
	doorH	: function() { hintReveals.door	= true;	setupSvg(curTab); },

	reset: function() { reveals = {}; hintReveals = {}; }
});

function setupSvg(tab)
{
	curTab = tab;

	let xs = [ -.64, .24, .72, -.45, -3.27, -4.19, 2.4, -1.7, -2.24, -2.36, -1.43, -1.36, 1.69, 2.55, 1.61, 1.15, .61, .55, -.57, -1.25, 0, .19, -2.56, -1.43 ];
	let ys = [ -.29, -.63, .19, .64, -.88, -1.09, -2.05, -2.64, .62, -.94, -.73, .28, -1.48, .27, .36, -.7, -2.43, -1.48, -1.2, -1.85, 1.44, 2.36, 1.47, 1.19 ];
	document.getElementById('svg-extra').innerHTML = '';

	let faces = Array.from(document.querySelectorAll('path.face'));
	faces.forEach(face => { face.classList.remove(...face.classList); face.classList.add('face'); face.onmouseover = null; face.onmouseout = null; });

	switch (tab)
	{
		case 'carpet':
			if (reveals.carpet)
				document.getElementById('svg-extra').innerHTML = `
					<g font-size='.1'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]-.3}'>${faceData[i].cc}</text>`).join('')}</g>
					<g font-size='.1'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]-.17}'>${faceData[i].ci}</text>`).join('')}</g>
					<g font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.2}'>${faceData[i].cc[faceData[i].ci-1]}</text>`).join('')}</g>
				`;
			break;

		case 'cyan':
			document.getElementById('svg-extra').innerHTML = `<g font-size='.16' class='cyan-reveal-${reveals.cyan || '0'}'>
				<text transform='translate(-0.15 -0.39) rotate(68.91)' y='-.03'>25</text><text transform='translate(-0.15 -0.39) rotate(-111.09)' y='-.03'>25</text><text transform='translate(-0.6 -0.81) rotate(3.72)' y='-.03'>36</text><text transform='translate(-0.6 -0.81) rotate(-176.28)' y='-.03'>36</text><text transform='translate(-0.27 -1.65) rotate(-126.66)' y='-.03'>40</text><text transform='translate(-1.6 -0.33) rotate(3.72)' y='-.03'>19</text><text transform='translate(-0.97 0.43) rotate(-61.47)' y='-.03'>11</text><text transform='translate(-1 -0.07) rotate(-126.66)' y='-.03'>23</text><text transform='translate(-1 -0.07) rotate(53.34)' y='-.03'>23</text><text transform='translate(-1.59 -0.22) rotate(168.16)' y='-.03'>19</text><text transform='translate(-0.89 0.46) rotate(102.97)' y='-.03'>11</text><text transform='translate(-0.72 0.93) rotate(37.78)' y='-.03'>26</text><text transform='translate(0.97 -0.26) rotate(-145.15)' y='-.03'>20</text><text transform='translate(0.93 -1.17) rotate(149.66)' y='-.03'>37</text><text transform='translate(1.01 -0.33) rotate(19.28)' y='-.03'>20</text><text transform='translate(0.07 -1.63) rotate(84.47)' y='-.03'>40</text><text transform='translate(0.88 -1.23) rotate(-45.9)' y='-.03'>37</text><text transform='translate(-0.82 -1.68) rotate(-45.9)' y='-.03'>42</text><text transform='translate(-0.82 -1.68) rotate(134.1)' y='-.03'>42</text><text transform='translate(-1.93 -0.77) rotate(-77.03)' y='-.03'>18</text><text transform='translate(-1.93 -0.77) rotate(102.97)' y='-.03'>18</text><text class='cyan-clue-1' transform='translate(-2.7 0.59) rotate(84.47)' y='-.03'>20</text><text transform='translate(-1.85 0.26) rotate(-111.09)' y='-.03'>25</text><text transform='translate(-1.85 0.26) rotate(68.91)' y='-.03'>25</text><text transform='translate(-1 0.97) rotate(-111.09)' y='-.03'>26</text><text transform='translate(1.57 -1.98) rotate(165.22)' y='-.03'>27</text><text transform='translate(0.45 -2.02) rotate(3.72)' y='-.03'>24</text><text transform='translate(0.45 -2.02) rotate(-176.28)' y='-.03'>24</text><text transform='translate(1.01 -2.26) rotate(-61.47)' y='-.03'>27</text><text transform='translate(-2.14 -2.92) rotate(100.04)' y='-.03'>11</text><text class='cyan-clue-1' transform='translate(-3.56 -0.59) rotate(37.78)' y='-.03'>21</text><text class='cyan-clue-1' transform='translate(-3.06 -0.54) rotate(-27.41)' y='-.03'>20</text><text transform='translate(-3.22 -1.43) rotate(-157.78)' y='-.03'>11</text><text class='cyan-clue-1' transform='translate(-2.39 0.98) rotate(-160.72)' y='-.03'>33</text><text class='cyan-clue-1' transform='translate(-2.39 0.98) rotate(19.28)' y='-.03'>33</text><text class='cyan-clue-1' transform='translate(-2.88 1.1) rotate(134.1)' y='-.03'>21</text><text transform='translate(-2.98 1.59) rotate(68.91)' y='-.03'>22</text><text transform='translate(-2.45 1.89) rotate(3.72)' y='-.03'>42</text><text transform='translate(-0.3 2.35) rotate(68.91)' y='-.03'>42</text><text transform='translate(0.59 2.52) rotate(-61.47)' y='-.03'>37</text><text transform='translate(-0.04 1.87) rotate(168.16)' y='-.03'>51</text><text transform='translate(-0.04 1.87) rotate(-11.84)' y='-.03'>51</text><text transform='translate(2.07 0.12) rotate(84.47)' y='-.03'>27</text><text transform='translate(2.07 0.12) rotate(-95.53)' y='-.03'>27</text><text transform='translate(2.39 0.64) rotate(19.28)' y='-.03'>37</text><text transform='translate(2.98 0.03) rotate(-111.09)' y='-.03'>25</text><text transform='translate(2.52 -1.67) rotate(-14.78)' y='-.03'>25</text><text transform='translate(-4.09 -0.71) rotate(-11.84)' y='-.03'>22</text>
				<g class='ihs cyan-clue-2' font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.1}'>${faceData[i].v[1]}</text>`).join('')}</g>
				<g class='ihs cyan-clue-3' font-size='.1'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]-.23}'>${faceData[i].v[1]}</text>`).join('')}</g>
				<g class='ihs cyan-clue-3' font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.14}'>${String.fromCharCode(64 + faceData[i].v[1])}</text>`).join('')}</g>
			</g>`;
			break;

		case 'pink':
			document.getElementById('svg-extra').innerHTML = `<g font-size='.12' class='pink-reveal-${reveals.pink || '0'}'>
				<!--CyanCorners-start--><text transform='translate(-.09 -.05) rotate(-241.47)' y='.06'>41</text><text transform='translate(.03 -.09) rotate(-160.72)' y='.06'>41</text><text transform='translate(.10 .02) rotate(-79.96)' y='.06'>41</text><text transform='translate(-.06 .08) rotate(37.78)' y='.06'>41</text><text transform='translate(-.36 -.71) rotate(36.31)' y='.06'>40</text><text transform='translate(-.21 -.77) rotate(-78.50)' y='.06'>40</text><text transform='translate(-.35 -.87) rotate(-208.87)' y='.06'>40</text><text transform='translate(-.79 .08) rotate(-159.25)' y='.06'>47</text><text transform='translate(-.75 .24) rotate(-44.44)' y='.06'>47</text><text transform='translate(-.92 .18) rotate(85.94)' y='.06'>47</text><text transform='translate(.64 -.47) rotate(-242.93)' y='.06'>22</text><text transform='translate(.72 -.33) rotate(2.25)' y='.06'>22</text><text transform='translate(.81 -.49) rotate(-128.12)' y='.06'>22</text><text transform='translate(.13 -1.11) rotate(-13.31)' y='.06'>33</text><text transform='translate(.19 -1.27) rotate(-128.12)' y='.06'>33</text><text transform='translate(-.12 -1.30) rotate(85.94)' y='.06'>33</text><text transform='translate(.57 .55) rotate(-162.18)' y='.06'>36</text><text transform='translate(-.05 .79) rotate(-240.00)' y='.06'>36</text><text transform='translate(.03 .94) rotate(5.19)' y='.06'>36</text><text transform='translate(1.04 .43) rotate(-227.37)' y='.06'>46</text><text transform='translate(1.20 .46) rotate(-112.56)' y='.06'>46</text><text transform='translate(.41 1.24) rotate(70.37)' y='.06'>46</text><text transform='translate(-3.56 -1.50) rotate(-27.41)' y='.06'>59</text><text transform='translate(-3.69 -1.53) rotate(53.34)' y='.06'>59</text><text transform='translate(2.88 -2.51) rotate(50.41)' y='.06'>59</text><text transform='translate(-2.02 -3.25) rotate(-30.34)' y='.06'>59</text><text transform='translate(-3.32 -.50) rotate(-174.81)' y='.06'>49</text><text transform='translate(-2.59 .82) rotate(-128.12)' y='.06'>49</text><text transform='translate(-2.65 .98) rotate(-13.31)' y='.06'>49</text><text transform='translate(-2.89 -.73) rotate(-240.00)' y='.06'>55</text><text transform='translate(-2.64 .34) rotate(-62.93)' y='.06'>55</text><text transform='translate(-2.72 -.73) rotate(-125.19)' y='.06'>55</text><text transform='translate(-4.40 -1.55) rotate(-28.87)' y='.06'>36</text><text transform='translate(2.74 -1.81) rotate(-227.37)' y='.06'>36</text><text transform='translate(2.99 .29) rotate(-258.50)' y='.06'>36</text><text transform='translate(-4.63 -1.13) rotate(-94.06)' y='.06'>50</text><text transform='translate(2.65 .64) rotate(-193.31)' y='.06'>50</text><text transform='translate(.40 2.69) rotate(-208.87)' y='.06'>50</text><text transform='translate(2.17 -2.50) rotate(-31.81)' y='.06'>21</text><text transform='translate(-1.35 -2.99) rotate(51.88)' y='.06'>21</text><text transform='translate(.76 -2.90) rotate(20.75)' y='.06'>21</text><text transform='translate(1.96 -2.06) rotate(-96.99)' y='.06'>32</text><text transform='translate(1.83 -1.96) rotate(17.82)' y='.06'>32</text><text transform='translate(1.05 -2.51) rotate(85.94)' y='.06'>32</text><text transform='translate(2.27 -1.69) rotate(-162.18)' y='.06'>31</text><text transform='translate(2.14 -1.58) rotate(83.01)' y='.06'>31</text><text transform='translate(2.81 -.17) rotate(36.31)' y='.06'>31</text><text transform='translate(-1.30 -2.51) rotate(-242.93)' y='.06'>30</text><text transform='translate(.29 -2.80) rotate(-44.44)' y='.06'>30</text><text transform='translate(-1.22 -2.36) rotate(2.25)' y='.06'>30</text><text transform='translate(-2.14 .98) rotate(-193.31)' y='.06'>55</text><text transform='translate(-2.19 1.14) rotate(51.88)' y='.06'>55</text><text transform='translate(-1.88 1.17) rotate(-94.06)' y='.06'>55</text><text transform='translate(-1.29 -1.21) rotate(20.75)' y='.06'>44</text><text transform='translate(-1.01 -1.36) rotate(-78.50)' y='.06'>44</text><text transform='translate(-1.13 -1.48) rotate(-193.31)' y='.06'>44</text><text transform='translate(1.85 -.93) rotate(-194.78)' y='.06'>41</text><text transform='translate(2.10 -.23) rotate(-45.90)' y='.06'>41</text><text transform='translate(1.97 -.22) rotate(34.85)' y='.06'>41</text><text transform='translate(1.77 -.83) rotate(84.47)' y='.06'>41</text><text transform='translate(1.36 -1.83) rotate(-47.37)' y='.06'>36</text><text transform='translate(.82 -2.08) rotate(-208.87)' y='.06'>36</text><text transform='translate(.81 -1.92) rotate(36.31)' y='.06'>36</text><text transform='translate(2.19 .48) rotate(-128.12)' y='.06'>40</text><text transform='translate(2.02 .49) rotate(-242.93)' y='.06'>40</text><text transform='translate(.63 2.27) rotate(85.94)' y='.06'>40</text><text transform='translate(1.60 .74) rotate(-177.75)' y='.06'>57</text><text transform='translate(.30 1.71) rotate(-224.44)' y='.06'>57</text><text transform='translate(.34 1.88) rotate(20.75)' y='.06'>57</text><text transform='translate(.11 -2.11) rotate(-126.66)' y='.06'>46</text><text transform='translate(.10 -1.98) rotate(-45.90)' y='.06'>46</text><text transform='translate(-.53 -1.88) rotate(3.72)' y='.06'>46</text><text transform='translate(-.62 -1.97) rotate(84.47)' y='.06'>46</text><text transform='translate(-.39 1.88) rotate(-142.22)' y='.06'>86</text><text transform='translate(-.36 2.00) rotate(-61.47)' y='.06'>86</text><text transform='translate(-2.10 1.85) rotate(-225.90)' y='.06'>86</text><text transform='translate(-1.47 1.75) rotate(-176.28)' y='.06'>86</text><!--CyanCorners-end-->
				<g class='ihs pink-clue-1' font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.1}'>${faceData[i].v[2]}</text>`).join('')}</g>
				<g class='ihs pink-clue-2' font-size='.1'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]-.23}'>${faceData[i].v[2]}</text>`).join('')}</g>
				<g class='ihs pink-clue-2' font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.14}'>${String.fromCharCode(64 + faceData[i].v[2])}</text>`).join('')}</g>
			</g>`;
			break;

		case 'radio':
			let rws = [ 1.74, 2.67, 2.72, 3.58, 2.05, 2.18, 1.95, 3.6, 2, 2.02, 1.72, 2.29, 2.24, 2.1, 2.12, 3.58, 3.05, 3.22, 1.79, 2.67, 1.81, 1.41, 1.51, 3.09 ];
			document.getElementById('svg-extra').innerHTML = `<g class='radio-reveal-${reveals.radio || '0'}'>
				<g class='ihs radio-clue-1' font-size='.15'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]}'>${faceData[i].s.n}</text>`).join('')}</g>
				<g class='ihs radio-clue-2' font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.1}'>${faceData[i].s.n[0]}</text>`).join('')}</g>
				${Array(24).fill(null).map((_, i) => `<g id='radio-popup-${i}' class='ihs' transform='translate(${xs[i]} ${ys[i]-.5})'>
					<rect x='${-rws[i]/2}' y='-.6' width='${rws[i]}' height='.58' fill='#fff' stroke='black' stroke-width='.01'/>
					<path fill='#fff' stroke='black' stroke-width='.01' d='M${-rws[i]/2} -.02 V -.6 h ${rws[i]} V -.02 L .1 -.02 0 .08 -.1 -.02 z' />
					<text font-size='.15' y='-.4'>${faceData[i].s.t}</text>
					<text font-size='.10' y='-.25' font-family='Agency FB'>“${faceData[i].s.l}”</text>
					<text font-size='.12' y='-.1' font-family='Montserrat'>${faceData[i].s.n.toUpperCase()}</text>
				</g>`).join('')}
			</g>`;
			for (let faceIx = 0; faceIx < 24; faceIx++)
			{
				let popup = document.getElementById(`radio-popup-${faceIx}`);
				document.getElementById(`face-${faceIx}`).onmouseover	= function() { popup.classList.add('shown');	};
				document.getElementById(`face-${faceIx}`).onmouseout	= function() { popup.classList.remove('shown');	};
			}
			break;

		case 'box':
			if (reveals.box)
			{
				let bs = [
					{ verse: 'A is for Amy who fell down the stairs.',	w: 1.95	},
					{ verse: 'B is for Basil assaulted by bears.',	w: 1.75	},
					{ verse: 'C is for Clara who wasted away.',	w: 1.7	},
					{ verse: 'D is for Desmond thrown out of a sleigh.',	w: 0.1	},
					{ verse: 'E is for Ernest who choked on a peach.',	w: 2.01	},
					{ verse: 'F is for Fanny sucked dry by a leech.',	w: 1.9	},
					{ verse: 'G is for George smothered under a rug.',	w: 2.06	},
					{ verse: 'H is for Hector done in by a thug.',	w: 2.53, o: -.2	},
					{ verse: 'I is for Ida who drowned in a lake.',	w: 2.06	},
					{ verse: 'J is for James who took lye by mistake.',	w: 2.05	},
					{ verse: 'K is for Kate who was struck with an axe.',	w: 2.12	},
					{ verse: 'L is for Leo who swallowed some tacks.',	w: 2.04	},
					{ verse: 'M is for Maud who was swept out to sea.',	w: 2.09	},
					{ verse: 'N is for Neville who died of ennui.',	w: 5.59	},
					{ verse: 'O is for Olive run through with an awl.',	w: 1.98	},
					{ verse: 'P is for Prue trampled flat in a brawl.',	w: 3.08, o: .5	},
					{ verse: 'Q is for Quentin who sank in a mire.',	w: 1.87	},
					{ verse: 'R is for Rhoda consumed by a fire.',	w: 1.82	},
					{ verse: 'S is for Susan who perished of fits.',	w: 1.94	},
					{ verse: 'T is for Titus who flew into bits.',	w: 0.1	},
					{ verse: 'U is for Una who slipped down a drain.',	w: 1.99	},
					{ verse: 'V is for Victor squashed under a train.',	w: 2	},
					{ verse: 'W is for Winnie embedded in ice.',	w: 1.71	},
					{ verse: 'X is for Xerxes devoured by mice.',	w: 1.77	},
					{ verse: 'Y is for Yorick whose head was knocked in.',	w: 2.21	},
					{ verse: 'Z is for Zillah who drank too much gin.',	w: 1.98	}
				];
				document.getElementById('svg-extra').innerHTML = `
					<g font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.1}'>${String.fromCharCode(64 + faceData[i].v[4])}</text>`).join('')}</g>
					${Array(24).fill(null).map((_, i) => ({ i: i, w: bs[faceData[i].v[4]-1].w, o: bs[faceData[i].v[4]-1].o || 0 })).map(inf => `<g id='box-popup-${inf.i}' class='ihs' transform='translate(${xs[inf.i] - inf.o} ${ys[inf.i]-.5})'>
						<path fill='#fff' stroke='black' stroke-width='.01' d='M${-inf.w/2} .08 V -.5 h ${inf.w} V .08 L ${inf.o + .1} .08 ${inf.o} .18 ${inf.o - .1} .08 z' />
						<text font-size='.15' y='-.27'>${faceData[inf.i].item}</text>
						<text font-size='.15' y='-.07' font-family='Agency FB'>${bs[faceData[inf.i].v[4]-1].verse}</text>
					</g>`).join('')}`;
				for (let faceIx = 0; faceIx < 24; faceIx++)
				{
					let popup = document.getElementById(`box-popup-${faceIx}`);
					document.getElementById(`face-${faceIx}`).onmouseover	= function() { popup.classList.add('shown');	};
					document.getElementById(`face-${faceIx}`).onmouseout	= function() { popup.classList.remove('shown');	};
				}
			}
			break;

		case 'door':
			let doorInfo = [ { w: "NEED", l: "Require (4)", c: [ 2, 14, 13, 5 ], e: 0 }, { w: "DEAL", l: "Agreement or dish out cards (4)", c: [ 5, 4, 9, 10 ], e: 2, o: .6 }, { w: "ONSET", l: "Beginning (5)", c: [ 3, 23, 22, 4, 7 ], e: 4 }, { w: "SHARING", l: "Apportioning (7)", c: [ 22, 8, 11, 0, 1, 17, 16 ], e: 3 }, { w: "NUN", l: "Sister (3)", c: [ 23, 20, 2 ], e: 2 }, { w: "TEN", l: "X (3)", c: [ 21, 14, 15 ], e: 0 }, { w: "ROUTE", l: "Itinerary (5)", c: [ 0, 3, 20, 21, 13 ], e: 1 }, { w: "HATE", l: "Loathe (4)", c: [ 8, 9, 7, 6 ], e: 3 }, { w: "EGG", l: "Ovum (3)", c: [ 6, 16, 19 ], e: 3 }, { w: "ALONG", l: "For the length of (5)", c: [ 11, 10, 18, 17, 12 ], e: 1 }, { w: "GOING", l: "Leaving or functioning (5)", c: [ 19, 18, 1, 15, 12 ], e: 1 } ];
			let dws = [ 1.13, 2.92, 1.35, 1.63, 0.95, 0.61, 1.18, 1.07, 1, 1.92, 2.41 ];
			document.getElementById('svg-extra').innerHTML = `<g font-size='.12' class='door-reveal-${reveals.door || '0'}'>
				${reveals.door === 1 ? `<g font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.1}'>${"RINOEDETHALAGEENGNOGUTSN"[i]}</text>`).join('')}</g>`: ''}
				${reveals.door === 2 ? `
					<g font-size='.15'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]-.21}'>${"RINOEDETHALAGEENGNOGUTSN"[i]}${faceData[i].e.filter(ed => ed.cm && /^[\+−]/.test(ed.cm))[0].cm}</text>`).join('')}</g>
					<g font-size='.4'>${Array(24).fill(null).map((_, i) => `<text x='${xs[i]}' y='${ys[i]+.16}'>${String.fromCharCode(64 + faceData[i].v[5])}</text>`).join('')}</g>
				`: ''}
				${faceData.map(fd => fd.e.map(e => e.cm ? `<text transform='translate(${e.cmx} ${e.cmy}) rotate(${180 + e.cma})' y='.13'>${e.cm}</text>` : '').join('')).join('')}
				${doorInfo.map((di, ix) => `<g id='cw-popup-${ix}' class='ihs' transform='translate(${faceData[di.c[0]].e[di.e].cmx} ${faceData[di.c[0]].e[di.e].cmy}) rotate(${180+faceData[di.c[0]].e[di.e].cma})'><path fill='#fff' stroke='black' stroke-width='.01' d='M ${-dws[ix]/2-(di.o||0)} -.04 V -.3 H ${dws[ix]/2-(di.o||0)} V -.04 L .1 -.04 0 .06 -.1 -.04 z' /><text font-size='.2' x='${-(di.o||0)}' y='-.11'>${di.l}</text></g>`).join('')}
			</g>`;
			if (reveals.door)
			{
				Array(24).fill(null).forEach((_, faceIx) =>
				{
					let face = document.getElementById(`face-${faceIx}`);
					let one = doorInfo.findIndex(inf => inf.c.includes(faceIx));
					let two = doorInfo.findIndex((inf, ix) => ix > one && inf.c.includes(faceIx));
					face.onmouseover = function()
					{
						doorInfo[one].c.forEach(c => { document.getElementById(`face-${c}`).classList.add('cwh-1'); });
						doorInfo[two].c.forEach(c => { document.getElementById(`face-${c}`).classList.add('cwh-2'); });
						document.getElementById(`cw-popup-${one}`).classList.add('cwp-1');
						document.getElementById(`cw-popup-${two}`).classList.add('cwp-2');
						document.getElementById('main-svg').classList.add('nc');

					};
					face.onmouseout = function()
					{
						doorInfo[one].c.forEach(c => { document.getElementById(`face-${c}`).classList.remove('cwh-1'); });
						doorInfo[two].c.forEach(c => { document.getElementById(`face-${c}`).classList.remove('cwh-2'); });
						document.getElementById(`cw-popup-${one}`).classList.remove('cwp-1');
						document.getElementById(`cw-popup-${two}`).classList.remove('cwp-2');
						document.getElementById('main-svg').classList.remove('nc');
					};
				});
			}
			else
			{
				doorInfo.forEach((di, diIx) =>
				{
					let face = document.getElementById(`face-${di.c[0]}`);
					face.onmouseover	= function() { document.getElementById(`cw-popup-${diIx}`).classList.add('cwp');	};
					face.onmouseout	= function() { document.getElementById(`cw-popup-${diIx}`).classList.remove('cwp');	};
				});
			}
			break;

		case null:
			return;
	}

	let tabIx = [ 'carpet', 'cyan', 'pink', 'radio', 'box', 'door' ].indexOf(tab);
	if (hintReveals[tab])
		for (let fIx = 0; fIx < faces.length; fIx++)
			if (faceData[fIx].c[tabIx] !== null)
				faces[fIx].classList.add(`c${faceData[fIx].c[tabIx]}`);
}
</script>
